<!DOCTYPE html>
<html>
<head>
	<title>Admin</title>
    <style type="text/css">
    	form{
    		width: 600px;
    		background: #00FA9A;
    		padding: 10px;
    		text-align: center;
    		margin: 40px auto;
    	}

    	.foodItems{
    		margin: 20px;
    	}

    	label{
           font: 40px;
           color: white;
           display: block;
           margin: 5px 0;
           
          
    	}

        input[type="text"]{
        	padding: 5px;
        	border-radius: 5px;
        	width: 70%;
        }

        input[type="submit"]{
        	padding: 8px;
        	width: 100px;
        	border-radius: 5px;
        	font-size: 20px;
        	background: #0000CD;
        	color: white;
        	border: none;
        }

        input[type="submit"]:hover{
        	opacity: 0.7;
        }
        table{
        	margin: 80px 0;
        }
        table, th, td{
        	border: 1px solid black;
        	text-align: center;
        	border-collapse: collapse;
        	padding: 5px;
        }
        table caption{
          font-size: 25px;
          margin: 20px 0;
        }
    </style>	
</head>
<body>
   
   <h1 style="text-align: center">Admin Page</h1>
   <form onsubmit="addFood()" id="foodForm" method="POST" action="http://localhost:3000/">
   	<h3 style="color: white">Add Food</h3>
   	<div class="foodItems">
	   	<label for="name">Image url</label>
	    <input type="text" id="image">
    </div>
   	<div class="foodItems">
	   	<label for="name">Name of food</label>
	    <input type="text" id="name">
    </div>
    <div>
	    <label for="description">Description</label>
	    <input type="text" id="description">
    </div>
   <div class="foodItems">
	    <label for="price">Price</label>
	    <input type="text" id="price">
    </div>
    <input type="submit" value="submit">
   </form>

   <table style="width: 100%" id="foodDetailsTable">
   	<caption>Created Foods</caption>
   	  <tr>
   	  	<th>id</th>
   	  	<th>name of food</th>
   	  	<th>description</th>
   	  	<th>price(#)</th>
   	  	<th>actions</th>
   	  </tr>

   	  
   </table>

   <script type="text/javascript">
   	window.onload = getFoodDetails("http://localhost:3000/foods");
   	 function getFoodDetails(url){
      const xhttp = new XMLHttpRequest();
      let details;
      xhttp.open('GET', url, true);
      xhttp.responseType = 'json';
      xhttp.onload = function(){
      	if(xhttp.status === 200){
          details = xhttp.response;
          
     for(var i = 0; i < details.length; i++){

     
     var tr = document.createElement('tr');
   	 var td1 = document.createElement('td');
   	 td1.textContent = details[i].id;
   	 tr.appendChild(td1);

   	 var td2 = document.createElement('td');
   	 td2.textContent = details[i].name;
   	 tr.appendChild(td2);

   	 var td3 = document.createElement('td');
   	 td3.textContent = details[i].description;
   	 tr.appendChild(td3);

   	 var td4 = document.createElement('td');
   	 td4.textContent = details[i].price;
   	 tr.appendChild(td4);

   	 var edit = document.createElement("button");
   	 edit.setAttribute('type', 'button');
   	 edit.textContent = "Edit";
   	 edit.style.color = 'blue';
   	 tr.appendChild(edit);
     
     var del = document.createElement("button");
   	 edit.setAttribute('type', 'button');
   	 del.textContent = "Delete";
   	 del.style.color = 'red';
   	 tr.appendChild(del);

     document.getElementById("foodDetailsTable").appendChild(tr);
    }

      	}else{
      		console.log(xhttp.response);
      	}
      }
      xhttp.send();
   	 }
   	 
   </script>
</body>
</html>